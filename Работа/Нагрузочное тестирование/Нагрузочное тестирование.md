## Введение

В этом эксперименте созданы максимально правдободоные условия. Сервер находится на удалённом сервере в Нидерландах

Технические характеристики сервера:

- CPU 1 vCPU
- RAM 2 GB
- Storage 20 GB
- Speed 1200 Mbps
- vSWAP 2 GB

Технические характеристика моего ноутбука: 
- CPU 4 ядра
- RAM 8 GB
- Speed 50 Mbps

В качестве REST сервера используется Node.js express.js, обратный прокси сервер (сжатие http) Nginx

Логика следующая:

- клиент заходит на сайт
- скачивает статические файлы
- когда выполнится js код, выполнится get запрос на получение всех видео /videos/getAll
- сервер сделает запрос в базу данных
- возвращает ответ

Тестрирование проводится с помощью k6. Замеряются такие параметры, как:

- CPU usage
- Memory Usage
- Latency
- Availability

В зависимости от количества запросов в секунду (RPS)

Так выглядит ответ от сервера:

```
[
  {
    title: "Steel Horizon",
    description:
      '"Steel Horizon" is a captivating cinematic journey that explores the boundaries of imagination and reality. With stunning visuals and a compelling narrative, it draws viewers into a richly woven tale full of emotion, suspense, and intrigue. As the characters navigate through complex challenges, deep personal struggles, and unexpected twists, the story unfolds with intensity and grace. Crafted by visionary creators, the film blends elements of classic storytelling with modern cinematic techniques to create an unforgettable experience. Whether you\'re drawn to heartfelt drama, thrilling action, or thought-provoking ideas, this film offers a powerful reflection on humanity, resilience, and discovery.',
    number: 19,
    src_url: "https://cdn.example.com/videos/video_19.mp4",
    preview_url: "/previews/bearwolf.mp4",
    image_url: "/images/bearwolf2.jpg",
    studios: ["MegaPix"],
    tags: ["documentary", "action", "comedy"],
  },
]
```
## Схема проекта

![](./images/scheme.jpg)

## Эксперимент первый 

Нагрузка:
```
  stages: [
    { duration: "5s", target: 10 },
    { duration: "10s", target: 20 },
    { duration: "10s", target: 30 },
    { duration: "10s", target: 40 },
    { duration: "10s", target: 50 },
    { duration: "10s", target: 60 },
    { duration: "10s", target: 70 },
    { duration: "10s", target: 80 },
    { duration: "10s", target: 90 },
    { duration: "10s", target: 100 },
    { duration: "10s", target: 110 },
    { duration: "10s", target: 120 },
    { duration: "10s", target: 130 },
    { duration: "10s", target: 140 },
    { duration: "10s", target: 150 },
    { duration: "10s", target: 170 },
    { duration: "10s", target: 190 },
    { duration: "10s", target: 210 },
    { duration: "5s", target: 5 },
  ]
```

duration - время каждой стадии, target - кол-во одновременно активных пользователей
Каждый пользователь отправляет запрос на сервер, ждёт ответа, далее ждёт 1 секунду.


Результаты без сжатия:

![](./images/no-compress_exp1_k6screen.png)

Результаты с сжатием (gzip 9): 

![](./images/gzip9_exp1_k6screen.png)

## Эксперимент второй 

Нагрузка:
```
  stages: [
    { duration: "10s", target: 10 },
    { duration: "20s", target: 10 },
    { duration: "20s", target: 15 },
    { duration: "20s", target: 20 },
    { duration: "20s", target: 25 },
    { duration: "20s", target: 30 },
    { duration: "10s", target: 5 },
  ]
```


Результаты без сжатия:

![](./images/no-compress_exp2_k6screen.png)

Результаты с сжатием (gzip 9): 

![](./images/gzip9_exp2_k6screen.png)



